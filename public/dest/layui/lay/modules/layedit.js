/*! myblog - v1.0.0 - 2017-01-02 */layui.define(["layer","form"],function(a){"use strict";var b=layui.jquery,c=layui.layer,d=layui.form(),e=(layui.hint(),layui.device()),f="layedit",g="layui-show",h="layui-disabled",i=function(){var a=this;a.index=0,a.config={tool:["strong","italic","underline","del","|","left","center","right","|","link","unlink","face","image"],hideTool:[],height:280}};i.prototype.set=function(a){var c=this;return b.extend(!0,c.config,a),c},i.prototype.on=function(a,b){return layui.onevent(f,a,b)},i.prototype.build=function(a,c){c=c||{};var d=this,f=d.config,h="layui-layedit",i=b("#"+a),k="LAY_layedit_"+ ++d.index,l=i.next("."+h),m=b.extend({},f,c),n=function(){var a=[],b={};return layui.each(m.hideTool,function(a,c){b[c]=!0}),layui.each(m.tool,function(c,d){w[d]&&!b[d]&&a.push(w[d])}),a.join("")}(),o=b(['<div class="'+h+'">','<div class="layui-unselect layui-layedit-tool">'+n+"</div>",'<div class="layui-layedit-iframe">','<iframe id="'+k+'" name="'+k+'" textarea="'+a+'" frameborder="0"></iframe>',"</div>","</div>"].join(""));return e.ie&&e.ie<8?i.removeClass("layui-hide").addClass(g):(l[0]&&l.remove(),j.call(d,o,i[0],m),i.addClass("layui-hide").after(o),d.index)},i.prototype.getContent=function(a){var b=k(a);if(b[0])return l(b[0].document.body.innerHTML)},i.prototype.getText=function(a){var c=k(a);if(c[0])return b(c[0].document.body).text()},i.prototype.sync=function(a){var c=k(a);if(c[0]){var d=b("#"+c[1].attr("textarea"));d.val(l(c[0].document.body.innerHTML))}},i.prototype.getSelection=function(a){var b=k(a);if(b[0]){var c=o(b[0].document);return document.selection?c.text:c.toString()}};var j=function(a,c,d){var e=this,f=a.find("iframe");f.css({height:d.height}).on("load",function(){var g=f.contents(),h=f.prop("contentWindow"),i=g.find("head"),j=b(["<style>","*{margin: 0; padding: 0;}","body{padding: 10px; line-height: 20px; overflow-x: hidden; word-wrap: break-word; font: 14px Helvetica Neue,Helvetica,PingFang SC,Microsoft YaHei,Tahoma,Arial,sans-serif; -webkit-box-sizing: border-box !important; -moz-box-sizing: border-box !important; box-sizing: border-box !important;}","a{color:#01AAED; text-decoration:none;}a:hover{color:#c00}","p{margin-bottom: 10px;}","img{display: inline-block; border: none; vertical-align: middle;}","pre{margin: 10px 0; padding: 10px; line-height: 20px; border: 1px solid #ddd; border-left-width: 6px; background-color: #F2F2F2; color: #333; font-family: Courier New; font-size: 12px;}","</style>"].join("")),k=g.find("body");i.append(j),k.attr("contenteditable","true").css({"min-height":d.height}).html(c.value||""),m.apply(e,[h,f,c,d]),s.call(e,h,a,d)})},k=function(a){var c=b("#LAY_layedit_"+a),d=c.prop("contentWindow");return[d,c]},l=function(a){return 8==e.ie&&(a=a.replace(/<.+>/g,function(a){return a.toLowerCase()})),a},m=function(a,d,f,g){var h=a.document,i=b(h.body);i.on("keydown",function(a){var b=a.keyCode;if(13===b){var d=o(h),e=p(d),f=e.parentNode;if("pre"===f.tagName.toLowerCase()){if(a.shiftKey)return;return c.msg("请暂时用shift+enter"),!1}h.execCommand("formatBlock",!1,"<p>")}}),b(f).parents("form").on("submit",function(){var a=i.html();8==e.ie&&(a=a.replace(/<.+>/g,function(a){return a.toLowerCase()})),f.value=a}),i.on("paste",function(b){h.execCommand("formatBlock",!1,"<p>"),setTimeout(function(){n.call(a,i),f.value=i.html()},100)})},n=function(a){var c=this;c.document,a.find("*[style]").each(function(){var a=this.style.textAlign;this.removeAttribute("style"),b(this).css({"text-align":a||""})}),a.find("table").addClass("layui-table"),a.find("script,link").remove()},o=function(a){return a.selection?a.selection.createRange():a.getSelection().getRangeAt(0)},p=function(a){return a.endContainer||a.parentElement().childNodes[0]},q=function(a,c,d){var e=this.document,f=document.createElement(a);for(var g in c)f.setAttribute(g,c[g]);if(f.removeAttribute("text"),e.selection){var h=d.text||c.text;if("a"===a&&!h)return;h&&(f.innerHTML=h),d.pasteHTML(b(f).prop("outerHTML")),d.select()}else{var h=d.toString()||c.text;if("a"===a&&!h)return;h&&(f.innerHTML=h),d.deleteContents(),d.insertNode(f)}},r=function(a,c){var d=this.document,e="layedit-tool-active",f=p(o(d)),g=function(b){return a.find(".layedit-tool-"+b)};c&&c[c.hasClass(e)?"removeClass":"addClass"](e),a.find(">i").removeClass(e),g("unlink").addClass(h),b(f).parents().each(function(){var a=this.tagName.toLowerCase(),b=this.style.textAlign;"b"!==a&&"strong"!==a||g("b").addClass(e),"i"!==a&&"em"!==a||g("i").addClass(e),"u"===a&&g("u").addClass(e),"strike"===a&&g("d").addClass(e),"p"===a&&("center"===b?g("center").addClass(e):"right"===b?g("right").addClass(e):g("left").addClass(e)),"a"===a&&(g("link").addClass(e),g("unlink").removeClass(h))})},s=function(a,d,e){var f=a.document,g=b(f.body),i={link:function(c){var d=p(c),e=b(d).parent();t.call(g,{href:e.attr("href"),target:e.attr("target")},function(b){var d=e[0];"A"===d.tagName?d.href=b.url:q.call(a,"a",{target:b.target,href:b.url,text:b.url},c)})},unlink:function(a){f.execCommand("unlink")},face:function(b){u.call(this,function(c){q.call(a,"img",{src:c.src,alt:c.alt},b)})},image:function(d){var f=this;layui.use("upload",function(g){var h=e.uploadImage||{};g({url:h.url,method:h.type,elem:b(f).find("input")[0],unwrap:!0,success:function(b){0==b.code?(b.data=b.data||{},q.call(a,"img",{src:b.data.src,alt:b.data.title},d)):c.msg(b.msg||"上传失败")}})})},code:function(b){v.call(g,function(c){q.call(a,"pre",{text:c.code,"lay-lang":c.lang},b)})},help:function(){c.open({type:2,title:"帮助",area:["600px","380px"],shadeClose:!0,shade:.1,skin:"layui-layer-msg",content:["http://www.layui.com/about/layedit/help.html","no"]})}},j=d.find(".layui-layedit-tool"),k=function(){var c=b(this),d=c.attr("layedit-event"),e=c.attr("lay-command");if(!c.hasClass(h)){g.focus();var k=o(f);k.commonAncestorContainer,e?(f.execCommand(e),/justifyLeft|justifyCenter|justifyRight/.test(e)&&f.execCommand("formatBlock",!1,"<p>"),setTimeout(function(){g.focus()},10)):i[d]&&i[d].call(this,k),r.call(a,j,c)}},l=/image/;j.find(">i").on("mousedown",function(){var a=b(this),c=a.attr("layedit-event");l.test(c)||k.call(this)}).on("click",function(){var a=b(this),c=a.attr("layedit-event");l.test(c)&&k.call(this)}),g.on("click",function(){r.call(a,j),c.close(u.index)})},t=function(a,b){var e=this,f=c.open({type:1,id:"LAY_layedit_link",area:"350px",shade:.05,shadeClose:!0,moveType:1,title:"超链接",skin:"layui-layer-msg",content:['<ul class="layui-form" style="margin: 15px;">','<li class="layui-form-item">','<label class="layui-form-label" style="width: 60px;">URL</label>','<div class="layui-input-block" style="margin-left: 90px">','<input name="url" lay-verify="url" value="'+(a.href||"")+'" autofocus="true" autocomplete="off" class="layui-input">',"</div>","</li>",'<li class="layui-form-item">','<label class="layui-form-label" style="width: 60px;">打开方式</label>','<div class="layui-input-block" style="margin-left: 90px">','<input type="radio" name="target" value="_self" class="layui-input" title="当前窗口"'+("_self"!==a.target&&a.target?"":"checked")+">",'<input type="radio" name="target" value="_blank" class="layui-input" title="新窗口" '+("_blank"===a.target?"checked":"")+">","</div>","</li>",'<li class="layui-form-item" style="text-align: center;">','<button type="button" lay-submit lay-filter="layedit-link-yes" class="layui-btn"> 确定 </button>','<button style="margin-left: 20px;" type="button" class="layui-btn layui-btn-primary"> 取消 </button>',"</li>","</ul>"].join(""),success:function(a,f){var g="submit(layedit-link-yes)";d.render("radio"),a.find(".layui-btn-primary").on("click",function(){c.close(f),e.focus()}),d.on(g,function(a){c.close(t.index),b&&b(a.field)})}});t.index=f},u=function(a){var d=function(){var a=["[微笑]","[嘻嘻]","[哈哈]","[可爱]","[可怜]","[挖鼻]","[吃惊]","[害羞]","[挤眼]","[闭嘴]","[鄙视]","[爱你]","[泪]","[偷笑]","[亲亲]","[生病]","[太开心]","[白眼]","[右哼哼]","[左哼哼]","[嘘]","[衰]","[委屈]","[吐]","[哈欠]","[抱抱]","[怒]","[疑问]","[馋嘴]","[拜拜]","[思考]","[汗]","[困]","[睡]","[钱]","[失望]","[酷]","[色]","[哼]","[鼓掌]","[晕]","[悲伤]","[抓狂]","[黑线]","[阴险]","[怒骂]","[互粉]","[心]","[伤心]","[猪头]","[熊猫]","[兔子]","[ok]","[耶]","[good]","[NO]","[赞]","[来]","[弱]","[草泥马]","[神马]","[囧]","[浮云]","[给力]","[围观]","[威武]","[奥特曼]","[礼物]","[钟]","[话筒]","[蜡烛]","[蛋糕]"],b={};return layui.each(a,function(a,c){b[c]=layui.cache.dir+"images/face/"+a+".gif"}),b}();return u.hide=u.hide||function(a){"face"!==b(a.target).attr("layedit-event")&&c.close(u.index)},u.index=c.tips(function(){var a=[];return layui.each(d,function(b,c){a.push('<li title="'+b+'"><img src="'+c+'" alt="'+b+'"></li>')}),'<ul class="layui-clear">'+a.join("")+"</ul>"}(),this,{tips:1,time:0,skin:"layui-box layui-util-face",maxWidth:500,success:function(e,f){e.css({marginTop:-4,marginLeft:-10}).find(".layui-clear>li").on("click",function(){a&&a({src:d[this.title],alt:this.title}),c.close(f)}),b(document).off("click",u.hide).on("click",u.hide)}})},v=function(a){var b=this,e=c.open({type:1,id:"LAY_layedit_code",area:"550px",shade:.05,shadeClose:!0,moveType:1,title:"插入代码",skin:"layui-layer-msg",content:['<ul class="layui-form layui-form-pane" style="margin: 15px;">','<li class="layui-form-item">','<label class="layui-form-label">请选择语言</label>','<div class="layui-input-block">','<select name="lang">','<option value="JavaScript">JavaScript</option>','<option value="HTML">HTML</option>','<option value="CSS">CSS</option>','<option value="Java">Java</option>','<option value="PHP">PHP</option>','<option value="C#">C#</option>','<option value="Python">Python</option>','<option value="Ruby">Ruby</option>','<option value="Go">Go</option>',"</select>","</div>","</li>",'<li class="layui-form-item layui-form-text">','<label class="layui-form-label">代码</label>','<div class="layui-input-block">','<textarea name="code" lay-verify="required" autofocus="true" class="layui-textarea" style="height: 200px;"></textarea>',"</div>","</li>",'<li class="layui-form-item" style="text-align: center;">','<button type="button" lay-submit lay-filter="layedit-code-yes" class="layui-btn"> 确定 </button>','<button style="margin-left: 20px;" type="button" class="layui-btn layui-btn-primary"> 取消 </button>',"</li>","</ul>"].join(""),success:function(e,f){var g="submit(layedit-code-yes)";d.render("select"),e.find(".layui-btn-primary").on("click",function(){c.close(f),b.focus()}),d.on(g,function(b){c.close(v.index),a&&a(b.field)})}});v.index=e},w={html:'<i class="layui-icon layedit-tool-html" title="HTML源代码" lay-command="html" layedit-event="html"">&#xe64b;</i><span class="layedit-tool-mid"></span>',strong:'<i class="layui-icon layedit-tool-b" title="加粗" lay-command="Bold" layedit-event="b"">&#xe62b;</i>',italic:'<i class="layui-icon layedit-tool-i" title="斜体" lay-command="italic" layedit-event="i"">&#xe644;</i>',underline:'<i class="layui-icon layedit-tool-u" title="下划线" lay-command="underline" layedit-event="u"">&#xe646;</i>',del:'<i class="layui-icon layedit-tool-d" title="删除线" lay-command="strikeThrough" layedit-event="d"">&#xe64f;</i>',"|":'<span class="layedit-tool-mid"></span>',left:'<i class="layui-icon layedit-tool-left" title="左对齐" lay-command="justifyLeft" layedit-event="left"">&#xe649;</i>',center:'<i class="layui-icon layedit-tool-center" title="居中对齐" lay-command="justifyCenter" layedit-event="center"">&#xe647;</i>',right:'<i class="layui-icon layedit-tool-right" title="右对齐" lay-command="justifyRight" layedit-event="right"">&#xe648;</i>',link:'<i class="layui-icon layedit-tool-link" title="插入链接" layedit-event="link"">&#xe64c;</i>',unlink:'<i class="layui-icon layedit-tool-unlink layui-disabled" title="清除链接" lay-command="unlink" layedit-event="unlink"">&#xe64d;</i>',face:'<i class="layui-icon layedit-tool-face" title="表情" layedit-event="face"">&#xe650;</i>',image:'<i class="layui-icon layedit-tool-image" title="图片" layedit-event="image">&#xe64a;<input type="file" name="file"></i>',code:'<i class="layui-icon layedit-tool-code" title="插入代码" layedit-event="code">&#xe64e;</i>',help:'<i class="layui-icon layedit-tool-help" title="帮助" layedit-event="help">&#xe607;</i>'},x=new i;a(f,x)});